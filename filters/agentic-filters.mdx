# Agentic 知识过滤器

Agentic 过滤让 Agent 能自动从您的查询文本中提取过滤条件，从而获得更自然、更具交互性的体验。

## 步骤 1：附加元数据

有两种方法可以为文档附加元数据：

1. **初始化知识库时附加元数据**

    ```python
    knowledge_base = PDFKnowledgeBase(
        path=[
            {
                "path": "path/to/cv1.pdf",
                "metadata": {
                    "user_id": "jordan_mit Mitchell",
                    "document_type": "cv",
                    "year": 2025,
                },
            },
            # ... 更多文档 ...
        ],
        vector_db=vector_db,
    )
    knowledge_base.load(recreate=True)
    ```

2. **逐个加载文档时附加元数据**

    ```python
    # 初始化 PDFKnowledgeBase
    knowledge_base = PDFKnowledgeBase(
        vector_db=vector_db,
        num_documents=5,
    )

    # 加载带 user_1 元数据的第一个文档
    knowledge_base.load_document(
        path=path/to/cv1.pdf,
        metadata={"user_id": "jordan_mitchell", "document_type": "cv", "year": 2025},
        recreate=True,  # 仅首次运行时设为 True，之后设为 False
    )

    # 加载带 user_2 元数据的第二个文档
    knowledge_base.load_document(
        path=path/to/cv2.pdf,
        metadata={"user_id": "taylor_brooks", "document_type": "cv", "year": 2025},
    )
    ```

---

## 工作原理

当您启用 Agentic 过滤 (`enable_agentic_knowledge_filters=True`) 时，Agent 会分析您的查询，并根据检测到的元数据应用过滤器。

**示例：**
```python
agent = Agent(
    knowledge=knowledge_base,
    search_knowledge=True,
    enable_agentic_knowledge_filters=True,
)
agent.print_response(
    "Tell me about Jordan Mitchell's experience and skills with jordan_mitchell as user id and document type cv",
    markdown=True,
)
```

在此示例中，Agent 将自动使用：
- `user_id = "jordan_mitchell"`
- `document_type = "cv"`

---

## 🌟 亲身体验 Agentic 过滤器！

体验 Agentic 过滤器如何从您的查询中自动提取相关元数据。

![Agentic Filters in Action](/images/agentic_filters.png)

*Agent 会根据您的查询智能地缩小搜索范围。*

---

## 何时使用 Agentic 过滤

- 当您想要更具对话性、对用户更友好的体验时。
- 当用户可能不知道确切的过滤语法时。

## 尝试一下！

- 在您的 Agent 上启用 `enable_agentic_knowledge_filters=True`。
- 自然地提问，在查询中包含过滤信息。
- 看看 Agent 如何自动缩小搜索结果！

---

## 开发者资源
- [Agentic 过滤](https://github.com/agno-agi/agno/blob/main/cookbook/agent_concepts/knowledge/filters/pdf/agentic_filtering.py)