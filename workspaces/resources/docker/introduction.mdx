---
title: Docker
---

[Docker](https://docs.docker.com/get-started/overview/) 是一项变革性的技术，它使我们能够本地运行应用程序。我们将[应用程序](/workspaces/apps/introduction)打包到包含运行应用程序所需一切的**容器**中。

## Docker 资源

Agno 使我们能够将 Docker 资源定义为 pydantic 对象，以便我们仅在 Python 中构建应用程序层。在大多数情况下，您将不会直接创建**Docker 资源**，而是使用[应用程序](/workspaces/apps/introduction)为我们创建这些资源。

<Accordion title="与 docker-compose 的区别">

Docker Compose 更成熟，并将资源定义为“yaml 配置”，而 agno 允许我们将资源定义为“Python 对象”。

我们仍然喜欢 docker-compose，只是想提升体验。使用 agno，我们很少直接定义资源，而是使用应用程序为我们创建资源。

</Accordion>

### 优势

- 将容器和镜像定义为具有输入和类型验证的 pydantic 对象。
- 允许重用和测试资源。
- 在软件层像普通的 Python 对象一样导入它们。
- 将多个资源打包到[应用程序](/workspaces/apps/introduction)中，以便我们可以定义**“代码即应用”**。
- 启用与 Python 代码中的资源交互的 AI 功能。

## 容器

`DockerContainer` 类定义了一个容器，例如，使用以下代码定义一个运行 [whoami](https://github.com/traefik/whoami) 镜像的容器。使用 `ag start resources.py` 启动它。

```python resources.py
from agno.docker.resource.container import DockerContainer

whoami = DockerContainer(
    name='whoami',
    image='traefik/whoami',
    ports={'80': 80},
)
```

通过打开 [http://localhost:80](http://localhost:80) 或使用以下命令进行测试：

```bash
curl -X POST http://localhost:80
```

同样的内容也可以定义为 `App`：

```python resources.py
from agno.docker.app.whoami import Whoami

whoami = Whoami()
```

使用 `ag stop resources.py` 停止资源。

## 镜像

`DockerImage` 类定义了一个镜像，例如，使用以下代码创建您自己的 Python 镜像并在容器中运行它。使用 `ag start resources.py` 构建它。

<CodeGroup>

```python resources.py
from agno.docker.resource.container import DockerContainer
from agno.docker.resource.image import DockerImage

python_image = DockerImage(
    name="my/python",
    tag="3.12",
    path=".",
    # push_image=True,
)

python_container = DockerContainer(
    name='python',
    image=python_image.get_image_str(),
)
```

```docker Dockerfile
FROM agnohq/python:3.12

CMD ["chill"]
```

</CodeGroup>

<br />

<Note>

请确保在当前目录中添加 `Dockerfile`。

</Note>