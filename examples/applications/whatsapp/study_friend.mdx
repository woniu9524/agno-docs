---
title: å­¦ä¹ ä¼™ä¼´
---

## ä»£ç 

```python cookbook/apps/whatsapp/study_friend.py
from textwrap import dedent

from agno.agent import Agent
from agno.app.whatsapp.app import WhatsappAPI
from agno.memory import memory
from agno.memory.v2.db.sqlite import SqliteMemoryDb
from agno.memory.v2.manager import MemoryManager
from agno.memory.v2.memory import Memory
from agno.models.google import Gemini
from agno.storage.agent.sqlite import SqliteAgentStorage
from agno.storage.sqlite import SqliteStorage
from agno.tools.duckduckgo import DuckDuckGoTools
from agno.tools.youtube import YouTubeTools

memory_db = SqliteMemoryDb(table_name="memory", db_file="tmp/memory.db")

memory = Memory(
    db=memory_db,
    memory_manager=MemoryManager(
        memory_capture_instructions="""\
                    - æ”¶é›†ç”¨æˆ·èŒä¸šå’Œå­¦æœ¯ç›®æ ‡ç›¸å…³ä¿¡æ¯
                    - æ”¶é›†ç”¨æˆ·è¿‡å¾€çš„å­¦æœ¯å’Œå­¦ä¹ ç»å†
                    - æ”¶é›†ç”¨æˆ·å½“å‰çš„çŸ¥è¯†æ°´å¹³
                    - æ”¶é›†ç”¨æˆ·å…´è¶£çˆ±å¥½
                    - æ”¶é›†ç”¨æˆ·å–œå¥½å’ŒåŒæ¶
                    """,
    ),
)

StudyBuddy = Agent(
    name="StudyBuddy",
    memory=memory,
    model=Gemini("gemini-2.0-flash"),
    enable_user_memories=True,
    storage=SqliteStorage(
        table_name="agent_sessions", db_file="tmp/persistent_memory.db"
    ),
    tools=[DuckDuckGoTools(), YouTubeTools()],
    description=dedent("""\
        ä½ æ˜¯ StudyBuddyï¼Œä¸€ä½æ‹¥æœ‰æ·±åšä¸ªæ€§åŒ–å­¦ä¹ ä¸“ä¸šçŸ¥è¯†çš„ä¸“å®¶æ•™è‚²å¯¼å¸ˆï¼ğŸ“š

        ä½ çš„ä½¿å‘½æ˜¯æˆä¸ºä¸€ä¸ªå¼•äººå…¥èƒœã€é€‚åº”æ€§å¼ºçš„å­¦ä¹ ä¼™ä¼´ï¼Œé€šè¿‡ä¸ªæ€§åŒ–æŒ‡å¯¼ã€äº’åŠ¨å­¦ä¹ å’Œå…¨é¢çš„èµ„æºç­–åˆ’å¸®åŠ©ç”¨æˆ·å®ç°ä»–ä»¬çš„æ•™è‚²ç›®æ ‡ã€‚
        """),
    instructions=dedent("""\
        è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ä»¥è·å¾—æœ€ä½³å­¦ä¹ ä½“éªŒï¼š

        1. åˆæ­¥è¯„ä¼°
        - äº†è§£ç”¨æˆ·çš„èƒŒæ™¯ã€ç›®æ ‡å’Œå…´è¶£
        - è¯„ä¼°å½“å‰çš„çŸ¥è¯†æ°´å¹³
        - ç¡®å®šåå¥½çš„å­¦ä¹ é£æ ¼

        2. å­¦ä¹ è·¯å¾„åˆ›å»º
        - è®¾è®¡å®šåˆ¶åŒ–å­¦ä¹ è®¡åˆ’ï¼Œä½¿ç”¨ DuckDuckGo æŸ¥æ‰¾èµ„æº
        - è®¾å®šæ˜ç¡®çš„é‡Œç¨‹ç¢‘å’Œç›®æ ‡
        - æ ¹æ®ç”¨æˆ·çš„è¿›åº¦å’Œæ—¶é—´å®‰æ’è¿›è¡Œè°ƒæ•´
        - ä½¿ç”¨çŸ¥è¯†åº“ä¸­æä¾›çš„ææ–™

        3. å†…å®¹ä¼ é€’
        - å°†å¤æ‚ä¸»é¢˜åˆ†è§£æˆæ˜“äºç†è§£çš„éƒ¨åˆ†
        - ä½¿ç”¨ç›¸å…³çš„ç±»æ¯”å’Œç¤ºä¾‹
        - å°†æ¦‚å¿µä¸ç”¨æˆ·çš„å…´è¶£è”ç³»èµ·æ¥
        - æä¾›å¤šç§æ ¼å¼çš„èµ„æºï¼ˆæ–‡æœ¬ã€è§†é¢‘ã€äº’åŠ¨ï¼‰
        - ä½¿ç”¨çŸ¥è¯†åº“ä¸­æä¾›çš„ææ–™

        4. èµ„æºç­–åˆ’
        - ä½¿ç”¨ DuckDuckGo æŸ¥æ‰¾ç›¸å…³çš„å­¦ä¹ ææ–™
        - æ¨èä¼˜è´¨æ•™è‚²å†…å®¹
        - åˆ†äº«ç¤¾åŒºå­¦ä¹ æœºä¼š
        - å»ºè®®å®è·µç»ƒä¹ 
        - ä½¿ç”¨çŸ¥è¯†åº“ä¸­æä¾›çš„ææ–™
        - ä½¿ç”¨ç”¨æˆ·æä¾›çš„åŒ…å« pdf é“¾æ¥çš„ç½‘å€

        5. æˆä¸ºæœ‹å‹
        - åœ¨ç”¨æˆ·æƒ…ç»ªä½è½æ—¶æä¾›æƒ…æ„Ÿæ”¯æŒ
        - ä»¥äº²è¿‘çš„æœ‹å‹æˆ–å“¥ä»¬çš„æ–¹å¼ä¸ä»–ä»¬äº’åŠ¨


        ä½ çš„æ•™å­¦é£æ ¼ï¼š
        - é¼“åŠ±å’Œæ”¯æŒ
        - ä½¿ç”¨ emoji æ¥äº’åŠ¨ (ğŸ“š âœ¨ ğŸ¯)
        - èå…¥äº’åŠ¨å…ƒç´ 
        - æä¾›æ¸…æ™°çš„è§£é‡Š
        - åˆ©ç”¨è®°å¿†æ¥ä¸ªæ€§åŒ–äº’åŠ¨
        - é€‚åº”å­¦ä¹ åå¥½
        - åŒ…æ‹¬è¿›åº¦åº†ç¥
        - æä¾›å­¦ä¹ æŠ€å·§

        è¯·è®°ä½ï¼š
        - ä¿æŒä¼šè¯çš„ä¸“æ³¨å’Œç»“æ„åŒ–
        - å®šæœŸç»™äºˆé¼“åŠ±
        - åº†ç¥å­¦ä¹ é‡Œç¨‹ç¢‘
        - è§£å†³å­¦ä¹ éšœç¢
        - ä¿æŒå­¦ä¹ çš„è¿ç»­æ€§\
        """),
    show_tool_calls=True,
    markdown=True,
)

whatsapp_app = WhatsappAPI(
    agent=StudyBuddy,
    name="StudyBuddy",
    app_id="study_buddy",
    description="ä¸€ä¸ªé€šè¿‡ä¸ªæ€§åŒ–æŒ‡å¯¼ã€äº’åŠ¨å­¦ä¹ å’Œå…¨é¢èµ„æºç­–åˆ’å¸®åŠ©ç”¨æˆ·å®ç°æ•™è‚²ç›®æ ‡çš„å­¦ä¹ ä¼™ä¼´ã€‚",
)

app = whatsapp_app.get_app()

if __name__ == "__main__":
    whatsapp_app.serve(app="study_friend:app", port=8000, reload=True)

```

## ç”¨æ³•

<Steps>
  <Snippet file="create-venv-step.mdx" />

  <Step title="è®¾ç½®æ‚¨çš„ API å¯†é’¥">
    ```bash
    export GOOGLE_API_KEY=xxx
    ```
  </Step>

  <Step title="å®‰è£…åº“">
    ```bash
    pip install -U agno google-generativeai duckduckgo-search youtube-search-python "uvicorn[standard]"
    ```
  </Step>

  <Step title="è¿è¡Œ Agent">
    <CodeGroup>
    ```bash Mac
    python cookbook/apps/whatsapp/study_friend.py
    ```

    ```bash Windows
    python cookbook/apps/whatsapp/study_friend.py
    ```
    </CodeGroup>
  </Step>
</Steps>