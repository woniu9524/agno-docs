---
title: Agent State
---

æœ¬ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªåœ¨äº¤äº’ä¹‹é—´ç»´æŠ¤çŠ¶æ€çš„ä»£ç†ã€‚å®ƒæ¼”ç¤ºäº†ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨æœºåˆ¶ï¼Œä½†è¿™ç§æ¨¡å¼å¯ä»¥æ‰©å±•åˆ°æ›´å¤æ‚çš„çŠ¶***ç†ï¼Œä¾‹å¦‚ç»´æŠ¤å¯¹è¯******ã€ç”¨æˆ·åå¥½******æˆ–è·Ÿè¸ªå¤šæ­¥******ã€‚

å¯å°è¯•çš„ç¤ºä¾‹***ï¼š
- "å°†è®¡æ•°å™¨å¢åŠ  3 æ¬¡å¹¶***æˆ‘æœ€ç»ˆçš„è®¡æ•°"
- "æˆ‘ä»¬å½“å‰çš„è®¡æ•°æ˜¯***ï¼Ÿå†å¢åŠ  2"
- "å°†è®¡æ•°å™¨å¢åŠ  5 æ¬¡ï¼Œ***æˆ‘***ä¸ª***éª¤"
- "åœ¨æˆ‘ä»¬çš„è®¡æ•°ä¸ŠåŠ  4ï¼Œ***æˆ‘***æˆ‘ä»¬ä»å“ªé‡Œå¼€å§‹"
- "å°†è®¡æ•°å™¨å¢åŠ ä¸¤æ¬¡å¹¶***æˆ‘ä»¬çš„æ—…ç¨‹"

## ä»£ç 

```python agent_state.py
from textwrap import dedent

from agno.agent import Agent
from agno.models.openai import OpenAIChat


# å®šä¹‰ä¸€ä¸ªå¢åŠ è®¡æ•°å™¨å¹¶***æ–°å€¼çš„å·¥å…·
def increment_counter(agent: Agent) -> str:
    """å¢åŠ ä¼šè¯è®¡æ•°å™¨å¹¶***æ–°å€¼ã€‚"""
    agent.session_state["count"] += 1
    return f"The count is now {agent.session_state['count']}"


# åˆ›å»ºä¸€ä¸ªç»´æŠ¤çŠ¶æ€çš„çŠ¶æ€***ç†ä»£ç†
agent = Agent(
    model=OpenAIChat(id="gpt-4o"),
    # åˆå§‹åŒ–ä¼šè¯çŠ¶æ€ï¼Œè®¡æ•°å™¨ä» 0 å¼€å§‹
    session_state={"count": 0},
    tools=[increment_counter],
    # æ‚¨å¯ä»¥åœ¨***ä¸­ä½¿ç”¨ä¼šè¯çŠ¶æ€ä¸­çš„å˜é‡
    instructions=dedent("""\
        ä½ æ˜¯çŠ¶æ€***ç†***ï¼Œä¸€ä¸ªçƒ­æƒ…çš„çŠ¶æ€***ç†æŒ‡å¯¼***ï¼ğŸ”„
        ä½ çš„å·¥ä½œæ˜¯***ç”¨ç®€å•çš„è®¡æ•°å™¨***ä¾‹***åŠ©ç”¨æˆ·***è§£çŠ¶æ€***ç†ã€‚

        æ¯æ¬¡äº¤äº’***è¯·******ä»¥ä¸‹***ï¼š
        1. åœ¨ç›¸å…³æ—¶******è®¤å½“å‰çŠ¶æ€ï¼ˆè®¡æ•°ï¼‰
        2. ä½¿ç”¨ increment_counter å·¥å…·***æ”¹çŠ¶æ€
        3.*********åœ°******çŠ¶æ€***çš„***

        æŒ‰å¦‚ä¸‹************ï¼š
        - å½“å‰çŠ¶æ€***
        - çŠ¶æ€*********
        - æœ€ç»ˆçŠ¶æ€å’Œè§‚æµ‹

        èµ·å§‹çŠ¶æ€ï¼ˆè®¡æ•°ï¼‰ä¸ºï¼š {count}\
    """),
    show_tool_calls=True,
    markdown=True,
)

# ç”¨***ç¤ºä¾‹
agent.print_response(
    "è®©æˆ‘ä»¬å°†è®¡æ•°å™¨å¢åŠ  3 æ¬¡å¹¶è§‚å¯ŸçŠ¶æ€***ï¼",
    stream=True,
)

# å¯å°è¯•çš„æ›´å¤šç¤ºä¾‹***ï¼š
"""
å°è¯•ä»¥ä¸‹******çš„çŠ¶æ€******ï¼š
1. "æ›´æ–°æˆ‘ä»¬çš„çŠ¶æ€ 4 æ¬¡å¹¶***è¸ª***æ›´"
2. "***æ”¹è®¡æ•°å™¨ä¸¤æ¬¡å¹¶***çŠ¶æ€******"
3. "å¢åŠ  3 æ¬¡å¹¶***çŠ¶æ€å¦‚ä½•***å­˜"
4. "è®©æˆ‘ä»¬*** 5 æ¬¡çŠ¶æ€******å¹¶***å¯Ÿ"
5. "åœ¨æˆ‘ä»¬çš„è®¡æ•°ä¸ŠåŠ  3 å¹¶***çŠ¶æ€***ç†***å¿µ"
"""

print(f"Final session state: {agent.session_state}")
```

## ç”¨***

<Steps>
  <Snippet file="create-venv-step.mdx" />

  <Step title="å®‰è£…åº“">
    ```bash
    pip install openai agno
    ```
  </Step>

  <Step title="è¿è¡Œä»£ç†">
    ```bash
    python agent_state.py
    ```
  </Step>

</Steps>