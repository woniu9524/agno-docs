---
title: Supabase MCP ä»£ç†
sidebarTitle: Supabase
---


ä½¿ç”¨ [Supabase MCP æœåŠ¡å™¨](https://github.com/supabase-community/supabase-mcp) åˆ›å»ºä¸€ä¸ªä»£ç†ï¼Œè¯¥ä»£ç†å¯ä»¥åˆ›å»ºé¡¹ç›®ã€æ•°æ®åº“ schemaã€è¾¹ç¼˜å‡½æ•°ç­‰ï¼š

```python
"""ğŸ”‘ Supabase MCP Agent - å±•ç¤º Supabase MCP çš„åŠŸèƒ½

æ­¤ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ Supabase MCP æœåŠ¡å™¨æ¥åˆ›å»ºé¡¹ç›®ã€æ•°æ®åº“ schemaã€è¾¹ç¼˜å‡½æ•°ç­‰ã€‚

è®¾ç½®ï¼š
1. å®‰è£… Python ä¾èµ–ï¼š`pip install agno mcp-sdk`
2. åˆ›å»ºä¸€ä¸ª Supabase è®¿é—®ä»¤ç‰Œï¼šhttps://supabase.com/dashboard/account/tokens å¹¶å°†å…¶è®¾ç½®ä¸º SUPABASE_ACCESS_TOKEN ç¯å¢ƒå˜é‡ã€‚
"""

import asyncio
import os
from textwrap import dedent

from agno.agent import Agent
from agno.models.openai import OpenAIChat
from agno.tools.mcp import MCPTools
from agno.tools.reasoning import ReasoningTools
from agno.utils.log import log_error, log_exception, log_info


async def run_agent(task: str) -> None:
    token = os.getenv("SUPABASE_ACCESS_TOKEN")
    if not token:
        log_error("æœªè®¾ç½® SUPABASE_ACCESS_TOKEN ç¯å¢ƒå˜é‡ã€‚")
        return

    npx_cmd = "npx.cmd" if os.name == "nt" else "npx"

    try:
        async with MCPTools(
            f"{npx_cmd} -y @supabase/mcp-server-supabase@latest --access-token={token}"
        ) as mcp:
            instructions = dedent(f"""
                ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ Supabase MCP æ¶æ„å¸ˆã€‚æ ¹æ®é¡¹ç›®æè¿°ï¼š
                {task}

                è‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
                1. æ ¹æ®é¡¹ç›®æè¿°è§„åˆ’æ•´ä¸ªæ•°æ®åº“ schemaã€‚
                2. è°ƒç”¨ `list_organizations` å¹¶é€‰æ‹©å“åº”ä¸­çš„ç¬¬ä¸€ä¸ªç»„ç»‡ã€‚
                3. ä½¿ç”¨ `get_cost(type='project')` ä¼°ç®—é¡¹ç›®åˆ›å»ºæˆæœ¬ï¼Œå¹¶åœ¨ä½ çš„å›å¤ä¸­æåŠæˆæœ¬ã€‚
                4. ä½¿ç”¨ `create_project` åˆ›å»ºä¸€ä¸ªæ–°çš„ Supabase é¡¹ç›®ï¼Œå¹¶ä¼ å…¥ç¡®è®¤çš„æˆæœ¬ IDã€‚
                5. ä½¿ç”¨ `get_project` è½®è¯¢é¡¹ç›®çŠ¶æ€ï¼Œç›´åˆ°çŠ¶æ€ä¸º `ACTIVE_HEALTHY`ã€‚
                6. åˆ†æé¡¹ç›®éœ€æ±‚ï¼Œå¹¶æå‡ºä¸€ä¸ªå®Œæ•´çš„ã€æ ‡å‡†åŒ–çš„ SQL schemaï¼ˆè¡¨ã€åˆ—ã€æ•°æ®ç±»å‹ã€ç´¢å¼•ã€çº¦æŸã€è§¦å‘å™¨å’Œå‡½æ•°ï¼‰ä½œä¸º DDL è¯­å¥ã€‚
                7. ä½¿ç”¨ `apply_migration` åº”ç”¨ schemaï¼Œå¹¶å°†è¿ç§»å‘½åä¸º `initial_schema`ã€‚
                8. é€šè¿‡ `list_tables` å’Œ `list_extensions` éªŒè¯å·²éƒ¨ç½²çš„ schemaã€‚
                8. ä½¿ç”¨ `deploy_edge_function` éƒ¨ç½²ä¸€ä¸ªç®€å•çš„å¥åº·æ£€æŸ¥è¾¹ç¼˜å‡½æ•°ã€‚
                9. æ£€ç´¢å¹¶æ‰“å°é¡¹ç›® URL (`get_project_url`) å’ŒåŒ¿åå¯†é’¥ (`get_anon_key`)ã€‚
            """)
            agent = Agent(
                model=OpenAIChat(id="o4-mini"),
                instructions=instructions,
                tools=[mcp, ReasoningTools(add_instructions=True)],
                markdown=True,
            )

            log_info(f"æ­£åœ¨ä¸ºä»¥ä¸‹é¡¹ç›®è¿è¡Œ Supabase é¡¹ç›®ä»£ç†ï¼š{task}")
            await agent.aprint_response(
                message=task,
                stream=True,
                stream_intermediate_steps=True,
                show_full_reasoning=True,
            )
    except Exception as e:
        log_exception(f"å‘ç”Ÿæ„å¤–é”™è¯¯ï¼š{e}")


if __name__ == "__main__":
    demo_description = (
        "å¼€å‘ä¸€ä¸ªåŸºäºäº‘çš„ SaaS å¹³å°ï¼Œå…·å¤‡ AI é©±åŠ¨çš„ä»»åŠ¡å»ºè®®ã€æ—¥å†åŒæ­¥ã€é¢„æµ‹æ€§ä¼˜å…ˆçº§æ’åºã€å›¢é˜Ÿåä½œå’Œé¡¹ç›®åˆ†æåŠŸèƒ½ã€‚"
    )
    asyncio.run(run_agent(demo_description))


# ç¤ºä¾‹æç¤ºä¾›å°è¯•ï¼š
"""
ä¸€ä¸ª SaaS å·¥å…·ï¼Œå¸®åŠ©ä¼ä¸šä½¿ç”¨ AI è‡ªåŠ¨åŒ–æ–‡æ¡£å¤„ç†ã€‚ç”¨æˆ·å¯ä»¥ä¸Šä¼ å‘ç¥¨ã€åˆåŒæˆ– PDFï¼Œå¹¶è·å¾—ç»“æ„åŒ–æ•°æ®ã€æ™ºèƒ½æ‘˜è¦ä»¥åŠç”¨äºåˆè§„æ€§æˆ–å¼‚å¸¸æƒ…å†µçš„çº¢è‰²æ ‡è®°è­¦æŠ¥ã€‚éå¸¸é€‚åˆæ³•å¾‹å›¢é˜Ÿã€ä¼šè®¡å¸ˆå’Œä¼ä¸šåå°åŠå…¬å®¤ã€‚

ä¸€ä¸ªç”± AI å¢å¼ºçš„ SaaS å¹³å°ï¼Œç”¨äºç®€åŒ–æ‹›è˜æµç¨‹ã€‚åŠŸèƒ½åŒ…æ‹¬ä½¿ç”¨ NLP è¿›è¡Œè‡ªåŠ¨å€™é€‰äººç­›é€‰ã€AI é¢è¯•å®‰æ’ã€å·¥ä½œæè¿°ä¸­çš„åè§æ£€æµ‹ä»¥åŠæµæ°´çº¿åˆ†æã€‚ä¸“ä¸ºå¿«é€Ÿå‘å±•çš„åˆåˆ›å…¬å¸å’Œä¸­å‹ HR å›¢é˜Ÿè®¾è®¡ã€‚

ä¸€ä¸ªå†…éƒ¨ SaaS å·¥å…·ï¼Œä¾› HR éƒ¨é—¨ç›‘æ§å‘˜å·¥çš„å¹¸ç¦æ„Ÿã€‚ç»“åˆæ¯å‘¨çš„æƒ…ç»ªç­¾åˆ°ã€åŒ¿ååé¦ˆå’Œ AI é©±åŠ¨çš„å€¦æ€ æ£€æµ‹æ¨¡å‹ã€‚ä¸ Slack å’Œ HR ç³»ç»Ÿé›†æˆï¼Œä»¥æ”¯æŒæ›´å¥åº·çš„å·¥ä½œåœºæ‰€æ–‡åŒ–ã€‚
"""
```